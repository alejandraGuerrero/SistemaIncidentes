<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:a4j="http://richfaces.org/a4j"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Registro Incidencia</title>
        <link href="#{facesContext.externalContext.requestContextPath}/resorces/style.css" rel="stylesheet" type="text/css"/>   
    </h:head>
    <h:body>
        <br/>
        <br/>
        <br/>
        <h:form id="formlistarincidente">
            <p:dataTable id="datatablelistaincidente"  var="car" value="#{administrador.lstincidente}" paginator="true" rows="10"  
                         >  

                <f:facet name="header">  
                    INCIDENTES
                </f:facet>  

                <p:column headerText="Codigo" style="width:25%">  
                    <h:outputText  rendered="#{!administrador.habilitarEditar}" value="#{car.inc_codigo}"/> 
                    <h:inputText disabled="true"  rendered="#{administrador.habilitarEditar}"  value="#{car.inc_codigo}"/> 
                </p:column>  

                <p:column headerText="DescripciÃ³n" style="width:25%">  
                    <h:outputText  rendered="#{!administrador.habilitarEditar}" value="#{car.inc_descripcion}"/> 
                    <h:inputText  rendered="#{administrador.habilitarEditar}" value="#{car.inc_descripcion}"/> 
                </p:column>  

                <p:column headerText="Fecha" style="width:24%">  
                    <h:outputText rendered="#{!administrador.habilitarEditar}" value="#{car.inc_fecha}">
                        <f:convertDateTime timeZone="America/Bogota" pattern="yyyy-MM-dd HH:mm:ss"/>
                    </h:outputText>  
                    <h:inputText disabled="true" rendered="#{administrador.habilitarEditar}" value="#{car.inc_fecha}">
                        <f:convertDateTime timeZone="America/Bogota" pattern="yyyy-MM-dd HH:mm:ss"/>
                    </h:inputText>
                </p:column>  


                <p:column headerText="Tipo Incidente" style="width:24%">  
                    <h:outputText  rendered="#{!administrador.habilitarEditar}" value="#{car.inc_descripcion}"/> 
                    <h:inputText  rendered="#{administrador.habilitarEditar}" value="#{car.inc_descripcion}"/> 
                </p:column>  

                <p:column headerText="Barrio" style="width:24%">  
                    <h:outputText  rendered="#{!administrador.habilitarEditar}" value="#{car.barrio.nombre_barrio}"/> 
                    <h:inputText disabled="true" rendered="#{administrador.habilitarEditar}" value="#{car.barrio.nombre_barrio}"/> 
                </p:column>

                <p:column headerText="Comuna" style="width:24%">  
                    <h:outputText  rendered="#{!administrador.habilitarEditar}" value="#{car.barrio.comuna}"/> 
                    <h:inputText disabled="true" rendered="#{administrador.habilitarEditar}" value="#{car.barrio.comuna}"/> 
                </p:column>  

                <p:column headerText="Usuario Registro" style="width:24%">  
                    <h:outputText rendered="#{!administrador.habilitarEditar}"  /> 
                    <h:inputText rendered="#{administrador.habilitarEditar}"   /> 
                </p:column>  

                <p:column rendered="#{!administrador.habilitarEditar}" headerText="Editar"  style="width:24%">  
                    <p:commandButton  update="datatablelistaincidente" action="#{administrador.editarInidente()}" value="Editar" /> 
                </p:column> 
                
                 <p:column rendered="#{administrador.habilitarEditar}" headerText="Editar"  style="width:24%">  
                    <p:commandButton  update="datatablelistaincidente" action="#{administrador.guardarModificacionIncidente()}" value="Guardar" /> 
                    <p:commandButton  update="datatablelistaincidente" action="#{administrador.cancelarModificacionIncidente()}" value="Cancelar" /> 
                </p:column> 

                <p:column rendered="#{!administrador.habilitarEditar}" headerText="Eliminar" style="width:24%">  
                    <p:commandButton   update="datatablelistaincidente" value="Eliminar"
                                       action="#{administrador.removerIncidente(car)}"/>
                </p:column> 

            </p:dataTable> 



        </h:form>
    </h:body>
</ui:composition>
